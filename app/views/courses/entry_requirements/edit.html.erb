<%= content_for :page_title, "GCSE requirements for applicants – #{course.name_and_code}" %>
<% content_for :before_content do %>
  <%= govuk_back_link_to(details_provider_recruitment_cycle_course_path(course.provider_code, course.recruitment_cycle_year, course.course_code)) %>
<% end %>

<%= render 'shared/errors' %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">
      <span class="govuk-caption-xl">UCAS Apply</span>
      GCSE requirements for&nbsp;applicants
    </h1>

    <p class="govuk-body">
      By law, all applicants need GCSE grade C/grade 4, or an equivalent, in English and Mathematics – plus Science for Primary courses.
    </p>

    <p class="govuk-body">
      Candidates may still be taking a GCSE when they apply. Alternatively, they can take an equivalency test to demonstrate they have the required skills to start a course.
    </p>

    <p class="govuk-body govuk-!-margin-bottom-8">
      The codes you pick determine how flexible you are towards those candidates.
    </p>

    <%= form_with model: course,
          url: entry_requirements_provider_recruitment_cycle_course_path(@course.provider_code, @course.recruitment_cycle_year, @course.course_code),
          method: :put do |form| %>

      <% course.gcse_subjects_required.each do |subject| %>
        <% legend = capture do %>
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h2 class="govuk-fieldset__heading">
              <%= subject.to_s.titleize %> GCSE
            </h2>
          </legend>
        <% end %>

        <%= render "shared/edit_options_radio_buttons",
              form: form,
              legend: legend,
              key: 'entry_requirements',
              field: subject.to_sym %>
      <% end %>

      <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
      <p class="govuk-body">Changes will appear on UCAS Apply within 2 hours.</p>

      <%= form.submit "Save changes", class: "govuk-button", data: { qa: 'course__save' } %>

      <p class="govuk-body">
        <%= link_to 'Cancel changes',
          details_provider_recruitment_cycle_course_path(course.provider_code, course.recruitment_cycle_year, course.course_code),
          class: "govuk-link govuk-link--no-visited-state" %>
      </p>
    <% end %>
  </div>
</div>

<% content_for :page_title, @recruitment_cycle.title %>
<%= content_for :before_content, render_breadcrumbs(:recruitment_cycle) %>

<%= render GovukComponent::NotificationBannerComponent.new(title_text: 'Important') do |notification_banner| %>
  <span class="govuk-body"><strong>Publish your courses so that candidates can view them on Find from the 5 October.</strong></span><br><br>

  <span class="govuk-body">Do this by selecting your courses for the <%= next_allocation_cycle_period_text %> cycle, check and edit the details, then select the “Publish” button.</span>
<% end %>

<h1 class="govuk-heading-l">
  <%= @recruitment_cycle.title %>
</h1>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <% if @recruitment_cycle.next? %>
      <p class="govuk-body-l">
        Prepare your courses and locations for the next cycle. Your records have been copied from the current cycle.
      </p>
    <% else %>
      <p class="govuk-body-l">
        Manage courses, locations and vacancies in the current&nbsp;cycle.
      </p>
    <% end %>

    <%= render partial: "recruitment_cycles/about_organisation", locals: { provider: @provider, year: params[:year] } %>
    <%= render partial: "recruitment_cycles/locations_info", locals: { provider: @provider, year: params[:year] } %>
    <%= render partial: "recruitment_cycles/courses_info", locals: { provider: @provider, year: params[:year] } %>
    <%= render partial: "recruitment_cycles/courses_accredited_body", locals: { provider: @provider, year: params[:year] } %>
    <% if @recruitment_cycle.current? %>
      <%= render partial: "recruitment_cycles/allocations", locals: { provider: @provider, year: params[:year] } %>
    <% elsif @recruitment_cycle.next? %>
      <%= render partial: "recruitment_cycles/allocations", locals: { provider: @provider.from_previous_recruitment_cycle, year: params[:year].to_i.pred } %>
    <% end %>
  </div>

  <aside class="govuk-grid-column-one-third">
    <div class="app-status-box">
      <h2 class="govuk-heading-s govuk-!-margin-bottom-2"><%= govuk_link_to "Users", users_provider_path(code: @provider.provider_code) %></h2>
      <p class="govuk-body">View users who manage your courses.</p>

      <hr class="govuk-section-break govuk-section-break--visible govuk-section-break--l">

      <% if @provider.rolled_over? %>
        <h2 class="govuk-heading-s">Your courses for the <%= "#{Settings.current_cycle} to #{Settings.current_cycle + 1}" %> cycle.</h2>
        <p class="govuk-body">
          Courses you publish for the <%= "#{Settings.current_cycle} to #{Settings.current_cycle + 1}" %> cycle will be made available on Find postgraduate teacher training for candidates to view.
        </p>
      <% end %>

      <h2 class="govuk-heading-s">Support and guidance</h2>
      <p class="govuk-body">If you have a question, or you’ve had a problem using Publish, you can email:</p>
      <p class="govuk-body"><%= bat_contact_mail_to subject: "Support and guidance" %></p>
    </div>
  </aside>
</div>
